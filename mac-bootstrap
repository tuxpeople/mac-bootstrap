#!/bin/bash

# Update system
# kudos: http://osxdaily.com/2012/12/05/9-command-line-tricks-for-mac-os-x-you-should-know/
echo "I'll try to update your Mac now. You need to be logged in into Mac App Store. You'll be prompted for your user's password (not the app store password!)"
echo "5s to abort."
sleep 5
sudo softwareupdate -i -a

# Install San Francisco Font
# kudos: https://github.com/supermarin/YosemiteSanFranciscoFont
ruby -e "$(curl -fsSL https://raw.github.com/supermarin/YosemiteSanFranciscoFont/master/install)"

# Check for Homebrew,
# Install if we don't have it
if test ! $(which brew); then
 echo "Installing homebrew..."
 ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"
fi

# Update homebrew recipes
brew update

# Install software from homebrew
binaries=(
 pwgen
 vim
 youtube-dl
 bash-completion
 csshx
 graphviz
 mtr
 wget
 htop-osx
 mobile-shell
 nmap
 sipcalc
 tmux
 tcptraceroute
 fping
 apt-dater
 webkit2png
# sshfs
 tree
 trash
)

echo "Installing homebrew software..."
brew install ${binaries[@]}

# Add tap and install libvirt-manager
# See also https://github.com/jeffreywildman/homebrew-virt-manager for info
brew tap jeffreywildman/homebrew-virt-manager
brew install virt-manager virt-viewer

# Install brew cask
brew install caskroom/cask/brew-cask

# Install software from cask
apps=(
 dropbox
 google-chrome
 firefox
 adium
 skype
 cakebrew
 darktable
 )

# Install apps to /Applications
# Default is: /Users/$user/Applications
echo "Installing apps from cask..."
brew cask install ${apps[@]}

# Cask fonts
brew tap caskroom/fonts

# fonts
fonts=(
  font-roboto
)

# install fonts
echo "installing fonts..."
brew cask install ${fonts[@]}

# Cleanup...
brew cleanup

# Checkout all my github repos
mkdir ~/git
cd ~/git
for i in $(wget -q -O- https://github.com/tuxpeople?tab=repositories | grep tuxpeople | grep Forks | awk '{ print $5 }' | cut -d'/' -f3)
do
  git clone git@github.com:tuxpeople/$i.git
done

# Add my Dropbox "bin" folder to path
echo "export PATH=$PATH:~/Dropbox/Allgemein/bin" >> .profile

